{% extends 'base.html' %}
{% load humanize %}

{% block title %}{{ expedition.platform }} - –°–∏—Å—Ç–µ–º–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π{% endblock %}

{% block content %}
    {% include 'include/_breadcrumbs.html' %}

    <div class="card mb-4">
        <div class="card-header">
            <h2 class="card-title mb-0">{{ expedition.platform }}</h2>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <table class="table table-sm">
                        <tr>
                            <th width="40%">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</th>
                            <td>{{ expedition.start_date|date:"d.m.Y" }}</td>
                        </tr>
                        <tr>
                            <th>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</th>
                            <td>{{ expedition.end_date|date:"d.m.Y" }}</td>
                        </tr>
                        <tr>
                            <th>–†–∞–π–æ–Ω —Ä–∞–±–æ—Ç:</th>
                            <td>{{ expedition.area }}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-6">
                    <table class="table table-sm">
                        <tr>
                            <th width="40%">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞–Ω—Ü–∏–π:</th>
                            <td>
                                <span class="badge bg-primary">{{ stations.count|intcomma }}</span>
                            </td>
                        </tr>
                        <tr>
                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±:</th>
                            <td>
                                <span class="badge bg-success">{{ samples_count|intcomma }}</span>
                            </td>
                        </tr>
                        <tr>
                            <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</th>
                            <td>
                                {% if duration_days %}
                                    {{ duration_days }} –¥–Ω–µ–π
                                {% else %}
                                    <span class="text-muted">‚Äî</span>
                                {% endif %}
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- –ë–ª–æ–∫ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö -->
    <div class="card mb-4">
        <div class="card-header">
            <h3 class="card-title mb-0">–î–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</h3>
        </div>
        <div class="card-body">
            <div class="row g-2">
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        üìä –ú–µ—Ç–µ–æ–¥–∞–Ω–Ω—ã–µ
                    </a>
                </div>
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        üåø –î–∞–Ω–Ω—ã–µ –ø–æ —É–≥–ª–µ—Ä–æ–¥—É
                    </a>
                </div>
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        ‚öóÔ∏è –ò–æ–Ω–Ω—ã–π —Å–æ—Å—Ç–∞–≤
                    </a>
                </div>
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        üé® –ü–∏–≥–º–µ–Ω—Ç—ã
                    </a>
                </div>
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        üíß –î–∞–Ω–Ω—ã–µ –æ–∫—Å–∏–º–µ—Ç—Ä–∞
                    </a>
                </div>
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        üß™ –ë–∏–æ–≥–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                    </a>
                </div>
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        üß¨ –ò–∑–º–µ—Ä–µ–Ω–∏—è pH
                    </a>
                </div>
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        üì° –î–∞–Ω–Ω—ã–µ CTD
                    </a>
                </div>
                <div class="col-md-3 col-sm-6">
                    <a href="{% url 'oceanography:coming_soon' %}" class="btn btn-outline-primary w-100">
                        üîç –ó–æ–Ω–¥—ã
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h3 class="card-title mb-0">–°—Ç–∞–Ω—Ü–∏–∏ —ç–∫—Å–ø–µ–¥–∏—Ü–∏–∏</h3>
        </div>
        <div class="card-body">
            {% if stations %}
            <div class="table-responsive">
                <table class="table table-striped table-hover data-table">
                    <thead>
                        <tr>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏</th>
                            <th>–®–∏—Ä–æ—Ç–∞</th>
                            <th>–î–æ–ª–≥–æ—Ç–∞</th>
                            <th>–ì–ª—É–±–∏–Ω–∞ –¥–Ω–∞ (–º)</th>
                            <th>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å (–º)</th>
                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for station in stations %}
                        <tr>
                            <td>{{ station.station_name }}</td>
                            <td>{{ station.latitude|floatformat:4 }}</td>
                            <td>{{ station.longitude|floatformat:4 }}</td>
                            <td>
                                {% if station.bottom_depth %}
                                    {{ station.bottom_depth|floatformat:1 }}
                                {% else %}
                                    <span class="text-muted">‚Äî</span>
                                {% endif %}
                            </td>
                            <td>
                                {% if station.secchi_depth %}
                                    {{ station.secchi_depth|floatformat:1 }}
                                {% else %}
                                    <span class="text-muted">‚Äî</span>
                                {% endif %}
                            </td>
                            <td>
                                <span class="badge bg-info">{{ station.samples.count }}</span>
                            </td>
                            <td>
                                <a href="{% url 'oceanography:coming_soon' %}" 
                                   class="btn btn-sm btn-outline-secondary">
                                    –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–±
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center text-muted py-4">
                <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Å—Ç–∞–Ω—Ü–∏—è—Ö –¥–ª—è —ç—Ç–æ–π —ç–∫—Å–ø–µ–¥–∏—Ü–∏–∏</p>
                <a href="{% url 'oceanography:add_stations' expedition.pk %}" class="btn btn-primary">
                    –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏–∏
                </a>
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}